@page "/"
@using AndroidMujezin.Modeli;
@using AndroidMujezin.Servisi;

@inject Servisi.VakatServis _vakatServis;

<h3>Postavke za ezane</h3>
<div class="container-fluid">
<ul>
    <li><AnchorLink href="#Zora">Zora</AnchorLink></li>
    <li><AnchorLink href="#IzlazakSunca">Izlazak sunca</AnchorLink></li>
    <li><AnchorLink href="#Podne">Podne </AnchorLink></li>
    <li><AnchorLink href="#Dzuma">Džuma</AnchorLink></li>
    <li><AnchorLink href="#Ikindija">Ikindija</AnchorLink></li>
    <li><AnchorLink href="#Aksam">Akšam</AnchorLink></li>
    <li><AnchorLink href="#Jacija">Jacija</AnchorLink></li>
</ul>
<hr />
<EditForm EditContext="@EditContext">
<DataAnnotationsValidator />
    @foreach (var namaz in namazi)
    {
        <div id="@namaz.Namaz">
            <br/>
    <div class="row">
    <h3 >Postavke za @_vakatServis.NazivNamazaNominativ(namaz.Namaz)</h3>
        <div class="col-6">
        <div class="form-check">
            <label class="form-check-label">
                <span class="lead">Ezani</span>
            </label>
                        <input class="form-check-input" type="checkbox" @bind="namaz.Ezani">
            
        </div>
    </div>
        <div class="col-6">
    <div class="input-group">
      <div class="input-group-text">Korekcija minuta: </div>
                        <input type="number" class="form-control" @bind="namaz.KorekcijaMinta" min="0" max="100" placeholder="Korekcija minuta">
    </div>
  </div>
</div>
    <div class="row">

        <div class="col-6">
        <div class="form-check">
            <label class="form-check-label">
                <span class="lead">Obavjesti me</span>
            </label>
                        <input class="form-check-input" type="checkbox" @bind="namaz.Notifikuj">
        </div>
    </div>
        <div class="col-6">
        <div class="input-group">
                <div class="input-group-text">Korekcija minuta: </div>
                        <input type="number" class="form-control" @bind="namaz.NotifikujMinutaPrije" min="0" max="100" placeholder="Korekcija minuta">
        </div>
    </div>
    
    </div>
<div class="row ">
        <div class="col-12">
    <div class="input-group">
        <label class="input-group-text" >Audio fajla:</label>
        <select class="form-select" aria-label="Default select example">
            <option selected>Open this select menu</option>
            <option value="1">One</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
        </select>
    </div>
    </div>
</div>
<div class="row">
                <label class="form-label">Jačina zvuka ezana (volume: @namaz.Volume %)</label>
                <input type="range" class="form-range" @bind="namaz.Volume">
    </div>
    </div>
    <hr />
    }
    </EditForm>
    <hr />
    <button type="button" class="btn btn-primary" @onclick="spasi">Spasi</button>
</div>


@code {
    public NamazModel zora = new NamazModel() { Namaz = NamazEnum.Zora };
    public NamazModel izlazak = new NamazModel() { Namaz = NamazEnum.IzlazakSunca };
    public NamazModel podne = new NamazModel() { Namaz = NamazEnum.Podne };
    public NamazModel dzuma = new NamazModel() { Namaz = NamazEnum.Dzuma };
    public NamazModel ikindija = new NamazModel() { Namaz = NamazEnum.Ikindija };
    public NamazModel aksam = new NamazModel() { Namaz = NamazEnum.Aksam };
    public NamazModel jacija = new NamazModel() { Namaz = NamazEnum.Jacija };
    private EditContext EditContext;
    List<NamazModel> namazi = new List<NamazModel>();


    //private readonly VakatServis _vakatServis;

    protected override void OnInitialized()
    {




        //_vakatServis = vakatServis;
        namazi.Add(zora);
        namazi.Add(izlazak);
        namazi.Add(podne);
        namazi.Add(dzuma);
        namazi.Add(ikindija);
        namazi.Add(aksam);
        namazi.Add(jacija);

        EditContext = new EditContext(namazi);
        EditContext.OnFieldChanged += EditContext_OnFieldChanged;
        base.OnInitialized();
    }

    private void spasi()
    {
        var ado = namazi;
    }
    private void EditContext_OnFieldChanged(object sender, FieldChangedEventArgs e)
    {
        Console.Write($"{e.FieldIdentifier.FieldName}");
        
    }
}
   